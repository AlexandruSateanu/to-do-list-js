function TodoModule(){var t=function(){var t=[];return{getList:function(){return t},addTodo:function(e){t.push({todoName:e,completed:!1})},deleteTodo:function(e){t.splice(e,1)},editTodo:function(e,n){t[e].todoName=n}}}(),e=t.getList(),n={template:document.getElementById("todo-template").innerHTML,location:function(){return document.getElementById("todo-list-items")},createUI:function(t,e){var n=document.createElement("input");n.type="text",n.name="add",n.placeholder="What should we do next?",n.id="enter-todo",n.classList.add("text-input"),t.innerHTML="",t.appendChild(n);var i=document.createElement("ul");i.id="todo-list-items",t.appendChild(i),e(n)},addInputHandler:function(t){t.addEventListener("keypress",function(e){13===(e.which||e.keyCode)&&(i.addTodo(t.value),t.value="")})},initView:function(t){this.createUI(t,this.addInputHandler)},updateTodoPositions:function(){for(var t=document.querySelectorAll("#todo-list-items .todo"),n=0;n<e.length;n++)t[n].id=n},displayNewTodo:function(t,e){var n=this.location(),i=this.template,o={todoName:t[t.length-1].todoName},d=document.createElement("li");d.classList.add("todo"),d.innerHTML=Mustache.render(i,o),n.appendChild(d),this.updateTodoPositions(),this.addDeleteButtonEvent(d),this.addEditButtonEvent(d)},addDeleteButtonEvent:function(t){var e=function(t){var n=parseInt(t.target.parentNode.id);i.deleteTodo(n),this.removeEventListener("click",e)};if(t.hasChildNodes())for(var n=t.children,o=0;o<n.length;o++){var d=n[o];d.classList.contains("delete")&&d.addEventListener("click",e)}},removeTodo:function(t){var e=this.location();if(e.hasChildNodes())for(var n=e.children,i=0;i<n.length;i++)i===t&&e.removeChild(n[i]);this.updateTodoPositions()},addEditButtonEvent:function(t){var e=this.createEditInput,n=function(i){e(t),this.removeEventListener("click",n)};if(t.hasChildNodes())for(var i=t.children,o=0;o<i.length;o++){var d=i[o];d.classList.contains("edit")&&d.addEventListener("click",n)}},createEditInput:function(t){var e="";if(t.hasChildNodes())for(var n=t.children,i=0;i<n.length;i++)n[i].classList.contains("todo-text")&&(e=n[i].textContent),n[i].classList.contains("edit")&&(n[i].classList.add("save"),n[i].textContent="save");var o=document.createElement("input");o.type="text",o.name="edit-todo"+parseInt(t.id),o.value=e,o.id="edit-todo-"+parseInt(t.id),o.classList.add("text-input","edit-input"),t.appendChild(o),o.focus(),this.addSaveEditTodoEvent(t)},addSaveEditTodoEvent:function(t){var e=this.removeEditInput,n=function(){if(t.hasChildNodes())for(var e=t.children,n=0;n<e.length;n++){var i=e[n];if(i.classList.contains("edit-input"))return i.textContent}},o=function(d){var a=parseInt(d.target.parentNode.id);i.editTodo(a,n()),e(t),this.removeEventListener("click",o)};if(t.hasChildNodes())for(var d=t.children,a=0;a<d.length;a++){var s=d[a];s.classList.contains("save")&&s.addEventListener("click",o)}},removeEditInput:function(t){if(t.hasChildNodes())for(var e=t.children,n=0;n<e.length;n++){var i=e[n];i.classList.contains("edit-input")&&t.removeChild(i)}},editTodo:function(t){}},i={addTodo:function(i){""!==i&&(t.addTodo(i),n.displayNewTodo(e))},deleteTodo:function(e){t.deleteTodo(e),n.removeTodo(e)},editTodo:function(i,o){t.editTodo(i,o),n.displayNewTodo(e)}};return{init:function(t){n.initView(t)}}}